<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>VideoPlayer API - Fluid Project Wiki</title>
</head>
<body>
    <h1>VideoPlayer API</h1>
    <h2>VideoPlayer Overview</h2>
    <div>
        <p>
            The VideoPlayer will render a fully working videoPlayer with controllers 
            and captions. <br/>
            The player is fully compatible with FF5 and later Chrome 12,
            Safari 4 and later, and IE9.
            On non html 5 compatible browsers (IE versions older than 9) it will fallback to a flashplayer.
            The player is compatible with many different formats* of captions if you use the server side
            conversion service. If you don't wish to use it JSONcc format is the only caption format not
            working.
            <p>* DFXP, DvdStl, JSONcc, MicroDvd, MPlayer, QTSMIL, QTtext, RealText, Sami, Scc, SubRipSrt, SubViewer</p>
        </p>
    </div>
    <h2>Creator</h2>
    <div>
        <p>Calling the creator function is quite easy: </p>
        <pre>
            fluid.videoPlayer(container [,options]);
        </pre>
        <p> 
            Such a simple call will not get you anywhere so here are some 
            basic options if you don't to go through the whole documentation.<br/>
            The whole video player is based on a shared model, to make the videoPlayer work
            you'll need at least to give links to your video to it. Here is how to do so:
        </p>
        <pre>
            fluid.videoPlayer(container, {
                model: {
                    video: {
                        sources:[
                        /* here we had any source we want 
                            (if you are not familiar with HTML5 video please read "Note on video format and HTML5")*/
                            {
                                src: "my video link",
                                type: "choose between: video/mp4, video/webm, video/ogg, video/ogv, youtube (link to the youtube video)"
                            },
                            /*You can add as many different video link the browser will choose the one to actually parse*/
                        ]
                    }
                }
            });
        </pre>
        <p>
            The next thing you may want to do is to add captions to the video, to do that had a caption object in the model:
        </p>
        <pre>
            captions: {
                sources: {
                    "the name of your caption track (eg english)": {
                        src: "a link to find it",
                        type: "it's format "
                    }
                    /*add as many captions as wanted there*/
                },
                currentTrack: "the track that will be automatically loaded when the player is loaded"
            }
        </pre>
        <p>
            These 2 basic options will enable you to have a basic player with captions and video
        </p>
    </div>
    <h2>Options</h2>
        <h3>Model</h3>
        <p>
            The model is the main configurable element. It contains all the data that is needed by the videoPlayer to work.
            However be careful because all the elements of the model are not configurable as they are not in control of the user.
        </p>
        <p> 
        Here is a tree representation of the model. 
            <ul>
                <li>The red branches are those that should be never modified as they are
        generated by the videoplayer itself. </li>
                <li>The green branches are those opened to be modified by the user.</li>
            </ul>
        Please Note that the type of each node is put in parenthesis next to the their name.
        </p>
        <img src="img/model_videoplayer.png" alt="a tree representation of videoplayer's model"/>
        <p>Here is a quick explanation of each node and its default value</p>
        <table>
            <tbody>
                <tr>
                    <th>Name</th>
                    <th>Default</th>
                    <th>Type</th>
                    <th>Modifiable</th>
                    <th>Description</th>
                </tr>
                    <td>states.play</td>
                    <td>false</td>
                    <td>Boolean</td>
                    <td>Yes</td>
                    <td>This indicates if the video plays or not (put it to true in the options if you want on autoplay)</td>
                <tr>
                    <td>states.currentTime</td>
                    <td>0</td>
                    <td>Integer</td>
                    <td>No</td>
                    <td>The currentTime of the video in milliseconds</td>
                </tr>
                <tr>
                    <td>states.totalTime</td>
                    <td>0</td>
                    <td>Integer</td>
                    <td>No</td>
                    <td>The totalTime of the video in milliseconds equivalent to the HTML video's duration </td>
                </tr>
                <tr>
                    <td>states.displayCaptions</td>
                    <td>true</td>
                    <td>Boolean</td>
                    <td>Yes</td>
                    <td>Wether or not you can see the captions</td>
                </tr>
                <tr>
                    <td>states.fullscreen</td>
                    <td>false</td>
                    <td>Boolean</td>
                    <td>Yes</td>
                    <td>Choose if the videoPlayer is fullscreen or not</td>
                </tr>
                <tr>
                    <td>video.sources</td>
                    <td>null</td>
                    <td>Js Object</td>
                    <td>Yes</td>
                    <td>Contains the links to the different versions of the video (see creator)</td>
                </tr>
                <tr>
                    <td>captions.sources</td>
                    <td>null</td>
                    <td>Js Object</td>
                    <td>Yes</td>
                    <td>Contains the links to the different caption tracks (see creator)</td>
                </tr>
                <tr>
                    <td>video.maxNumber</td>
                    <td>3</td>
                    <td>Integer</td>
                    <td>Yes</td>
                    <td>For captions format that allow more than one caption at a time, this is the 
                        maximum number of simultaneous captions</td>
                </tr>
                <tr>
                    <td>video.currentTrack</td>
                    <td>undefined</td>
                    <td>String</td>
                    <td>Yes</td>
                    <td>The current track to be displayed(Has to be a key to the captions.sources)</td>
                </tr>
                <tr>
                    <td>video.conversionServiceUrl</td>
                    <td>"/videoPlayer/conversion_service/index.php"</td>
                    <td>String (URI)</td>
                    <td>Yes</td>
                    <td>the link to the conversion service page (to be changed only if you moved your conversion service)</td>
                </tr>
                <tr>
                    <td>video.currentCaptions</td>
                    <td>undefined</td>
                    <td>array</td>
                    <td>No</td>
                    <td>an array of the captions currently displayed on screen</td>
                </tr>
                <tr>
                    <td>video.track</td>
                    <td>undefined</td>
                    <td>array</td>
                    <td>No</td>
                    <td>contains the whole current caption track</td>
                </tr>
                <tr>
                    <td>video.currentIndice</td>
                    <td>undefined</td>
                    <td>Integer</td>
                    <td>No</td>
                    <td>The last Indice of the captions.track array (this points to the last captions displayed on screen)</td>
                </tr>
            </tbody>
        </table>
    <h2>Supported Events</h2>
        <table>
            <tr>
                <th>Event</th>
                <th>Type</th>
                <th>Description</th>
                <th>Parameters</th>
                <th>Parameter Description</th>
            </tr>
            <tr>
                <td>onMediaReady</td>
                <td>Default</td>
                <td>Notice that the videoPlayer.media subcomponent is created and can be used</td>
                <td>None</td>
                <td></td>
            </tr>
            <tr>
                <td>onControllersReady</td>
                <td>Default</td>
                <td>Notice that the videoPlayer.controllers subcomponent is created and can be used</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onCaptionnerReady</td>
                <td>Default</td>
                <td>Notice that the videoPlayer.captionner subcomponent is created and can be used</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onViewReady</td>
                <td>Default</td>
                <td>Notice that everything is rendered and the video loaded</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onTemplateReady</td>
                <td>Default</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onReadyToLoadCaptions</td>
                <td>Default</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onCaptionsLoaded</td>
                <td>Default</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onOldBrowerDetected</td>
                <td>Default</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onVolumeChange</td>
                <td>Default</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>onTimeChange</td>
                <td>Default</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>afterTimeChange</td>
                <td>Default</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    <h2>Selectors</h2>
    <h2>Configurable Subcomponents</h2>
    <h2>CSS Classes</h2>
    <h2>Keyboard default controls</h2>
    <h2>Note on video format and HTML5</h2>
    <h2>Note on other necessary Js</h2>    
</body>
</html>

